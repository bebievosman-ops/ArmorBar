<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Armor HUD</title>

<style>
body {
    margin:0;
    background:transparent;
    font-family:Arial, sans-serif;
    overflow:hidden;
}

.wrapper {
    width:600px;
    padding:10px;
}

.title {
    color:#ff2a2a;
    font-size:18px;
    letter-spacing:3px;
    margin-bottom:6px;
    text-shadow:0 0 8px #ff0000;
}

.bar {
    width:100%;
    height:22px;
    background:#111;
    border:2px solid #ff2a2a;
    position:relative;
    overflow:hidden;
}

.fill {
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#ff0000,#ff4444);
    box-shadow:0 0 15px #ff0000;
    transition:width 0.8s ease;
}

.segments {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:flex;
}

.segment {
    flex:1;
    border-right:1px solid rgba(255,255,255,0.2);
}

.amount {
    margin-top:6px;
    color:white;
    font-size:14px;
    text-shadow:0 0 6px #000;
}

.flash {
    animation:flash 0.6s ease;
}

@keyframes flash {
    0% { box-shadow:0 0 30px #ffffff; }
    100% { box-shadow:0 0 15px #ff0000; }
}
</style>
</head>

<body>

<div class="wrapper">
    <div class="title">ARMOR SYSTEM ONLINE</div>

    <div class="bar" id="bar">
        <div class="fill" id="fill"></div>
        <div class="segments">
            <div class="segment"></div>
            <div class="segment"></div>
            <div class="segment"></div>
            <div class="segment"></div>
            <div class="segment"></div>
        </div>
    </div>

    <div class="amount" id="amount">0 / 100 000 RUB</div>
</div>

<script>

const url = "https://www.donationalerts.com/widget/goal/9403218?token=umVNi7DM7QiFzCje7M7e";

let lastAmount = 0;

async function updateGoal(){
    try{
        const response = await fetch(url);
        const text = await response.text();

        const parser = new DOMParser();
        const doc = parser.parseFromString(text,"text/html");

        const progressText = doc.body.innerText;

        const numbers = progressText.match(/\d+/g);

        if(numbers && numbers.length >= 2){
            const current = parseInt(numbers[0]);
            const target = parseInt(numbers[1]);

            const percent = (current/target)*100;

            document.getElementById("fill").style.width = percent + "%";
            document.getElementById("amount").innerText =
                current.toLocaleString("ru-RU") + 
                " / " + 
                target.toLocaleString("ru-RU") + 
                " RUB";

            if(current > lastAmount){
                document.getElementById("bar").classList.add("flash");
                setTimeout(()=>{
                    document.getElementById("bar").classList.remove("flash");
                },600);
            }

            lastAmount = current;
        }
    }catch(e){
        console.log("Ошибка обновления");
    }
}

updateGoal();
setInterval(updateGoal, 5000);

</script>

</body>
</html>
